on:
  workflow_run:
    workflows: 
      - "Debug Yahhhhhhhhh"
    types: [completed]

jobs:
  on-success:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    steps:
      - run: echo 'The triggering workflow passed'
      - run: echo '${{ toJSON(github.event.workflow_run) }}'
      
      - name: Send custom JSON data to Slack workflow
        id: slack
        uses: slackapi/slack-github-action@v1.18.0
        with:
          # For posting a rich message using Block Kit
          payload: |
            {
              "attachments": [
                {
                  "mrkdwn_in": ["text"],
                    "color": "#36a64f",
                    "pretext": "Optional pre-text that appears above the attachment block",
                    "author_name": "author_name",
                    "author_link": "http://flickr.com/bobby/",
                    "author_icon": "https://placeimg.com/16/16/people",
                    "title": "title",
                    "title_link": "https://api.slack.com/",
                    "text": "Optional `text` that appears within the attachment",
                    "fields": [
                        {
                            "title": "A field's title",
                            "value": "This field's value",
                            "short": false
                        },
                        {
                            "title": "A short field's title",
                            "value": "A short field's value",
                            "short": true
                        },
                        {
                            "title": "A second short field's title",
                            "value": "A second short field's value",
                            "short": true
                        }
                    ],
                    "thumb_url": "http://placekitten.com/g/200/200",
                    "footer": "footer",
                    "footer_icon": "https://platform.slack-edge.com/img/default_application_icon.png",
                    "ts": 123456789
                }
              ]
            }
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
          SLACK_WEBHOOK_TYPE: INCOMING_WEBHOOK
  on-failure:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'failure' }}
    steps:
      - run: echo 'The triggering workflow failed'